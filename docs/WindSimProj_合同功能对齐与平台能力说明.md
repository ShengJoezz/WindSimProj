# WindSimProj 合同功能对齐与平台能力说明 v1.0

本说明用于对齐合同条款与平台现有能力，突出平台在复杂地形风能模拟、测风数据处理、致动类模型及三维可视化方面的工程化与专业化能力，可直接面向评审/验收使用。

---

## 1. 测风数据自动化处理模块（合同条款一）

- 核心能力
  - 多站点/多文件测风数据导入与自动识别（CSV），格式校验、缺测补全、异常剔除（跳变/越界/空值）。
  - 自动生成风向-风速玫瑰图、风能-风频分布图、多高度风速频率直方图与能量密度图。
  - 大气稳定度参数计算与分布统计（Monin-Obukhov 稳定度等指标，面向边界层分型）。
  - 并行化批处理与统一索引：一次导入、多批量处理、统一产出摘要与资产清单，支持历史结果快速回溯。
  - 一键打包下载（ZIP），便于成果归档与复核（图片、CSV、JSON 摘要）。
- 技术亮点
  - Python 科学计算栈（numpy/pandas/matplotlib）与并行运行器，性能与准确性兼顾。
  - 标准化输出资产：稳定度/风玫瑰/风能风频图件 PNG + 统计 CSV + processing_summary.json 概览。
  - API 与目录规范：`/api/windmast/{upload, analyze, analyses, results, images, download}`，`backend/windmast_data/{input,output}`。

---

## 2. 复杂地形精细化和自适应网格划分模块（合同条款二）

- 数据库与数据治理
  - 内置中国大陆区域地形与粗糙度数据资源目录（数据经统一治理与投影规范化）。
  - 支持用户自定义的地形/粗糙度文件创建、修改、删除与替换。
  - 在线 DEM 裁切与重采样：按任意经纬度范围快速提取子区（GDAL 裁切链路，毫秒级启动）。
  - 粗糙度映射：全国土地覆盖（CLCD）→ z0 映射，支持按中心点+半径快速生成 rou 文件。
- 自适应网格与重点加密
  - 参数化自适应建模：基于地形半径、加密高度、层数、增长率与过渡半径等策略生成各向异性网格。
  - 重点区域加密：对风机近场、尾流敏感区、地形突变区进行局部多级加密（半径/长度/层化策略可控）。
  - 规划中的误差驱动增强：支持引入速度梯度/涡量等误差指示器的再分布策略，迭代式 Refine→Solve→Assess。
- 技术亮点
  - GDAL + gdal-async + pyproj 组成的高性能地形裁切与投影流水线。
  - Gmsh + 自研 roughFoam 接口，确保网格与求解器边界层/粗糙度一致性；参数模板可复用、可复现实验。

---

## 3. 大气边界层流场数值模拟模块（合同条款三）

- 核心能力
  - 来流条件：支持多个测风点位联合入模，自动生成区域化边界层剖面与粗糙度一致的近地边界条件。
  - 求解设置：计算步长、总时间、物理模型（RANS/稳态）等全参数化配置；支持并行分解与任务阶段化执行。
  - 结果提取：任意点位/任意截面速度场查询与导出；剖面/切片/流线等多维后处理结果。
  - 实时追踪：Socket.IO 推送阶段进度、日志与任务状态，过程透明可审计。
- 技术亮点
  - 内置 roughFoam 链路与运行脚本（`base/run.sh`），统一“准备→求解→后处理”的自动化编排。
  - 计算完成后提供结构化可视化与数据接口，便于链路内外系统对接。

---

## 4. 基于致动类模型的风电场数值模拟模块（合同条款四）

- 核心能力
  - 风电场布局：支持导入/编辑风机点位（经纬度/轮毂高/转子直径/机型），多机组尾流相互作用入模。
  - 致动类模型（ADM/ALM）耦合：在复杂地形边界层流场中叠加致动盘/致动线模型，真实反映机组诱导与尾流演化。
  - 计算配置：与网格划分模块联动设置加密区与过渡区，保障近壁与尾流解析度与稳定性。
  - 成果导出：速度场/功率估算/风机周边剖面统计与尾流可视化图件。
- 技术亮点
  - 统一任务调度：与边界层模块共用运行与监控骨架，缩短从“布局→计算→验证”的闭环周期。
  - 面向工程评估：输出面向年发电量（AEP）评估与尾流损失分析的关键统计指标。

---

## 5. 三维粒子系统风场可视化模块（合同条款五）

- 核心能力
  - 三维地形渲染：复杂地形三维场景的实时渲染（缩放/旋转/漫游），支持 GIS 数据叠加与底图对齐。
  - 风机三维模型叠加：在场景中按经纬度/高程精准投放机组模型，支持选中与信息提示。
  - 三维粒子可视化：基于指定入射高度的粒子发射器方案，沿三维速度场实现“流场飞行”式可视化展示。
  - 任意剖面提取：对任意平面/曲面切片，展示切面上的速度/方向/能量分布。
- 技术亮点
  - WebGL/Three.js 与 vtk.js 结合的混合渲染方案，兼顾大规模 VTK 数据加载与交互帧率。
  - 轻量前端方案配合后端切片/抽样接口，在浏览器侧实现工程可用级别的三维风场交互。

---

## 6. 合同条款 → 平台能力对齐摘要

- 测风数据自动化处理：已实现。导入/校验/QC→玫瑰图/风能风频→稳定度→并行化批处理→成果打包。
- 复杂地形与自适应网格：已实现参数化自适应与重点加密；内置地形/粗糙度库与自定义管理；在线 DEM 裁切与 z0 映射。误差驱动自适应支持规划增强。
- 大气边界层数值模拟：已实现。多测风点入模、求解参数配置、自动编排与实时追踪；点/截面查询与导出。
- 致动类模型风电场模拟：已实现。机组布局管理与致动类模型耦合，输出尾流/功率相关结果。
- 三维粒子系统可视化：已实现。三维地形渲染+风机叠加+粒子系统+任意剖面展示+GIS 叠加渲染。

---

## 7. 交付形式与接口

- 图件：风玫瑰、风能风频、稳定度分布、剖面/切片/尾流与三维渲染图（PNG/SVG）。
- 数据：统计 CSV、JSON 摘要、VTK/VTU 切片数据、点位查询结果导出。
- 归档：ZIP 打包下载（分析结果/图件/摘要），支持批量归档与二次复核。
- 接口：RESTful API + Socket.IO 实时流，便于与调度/门户/报表系统对接。

---

## 8. 价值总结

- 工程可用：一键化从“数据→网格→求解→可视化→导出”的全链路能力，缩短迭代周期与沟通成本。
- 物理可信：粗糙度一致性、边界层解析与致动类模型耦合，真实刻画复杂地形与尾流演化。
- 易于扩展：模块化目录与接口，组件/算法/数据源可插拔，便于适配不同区域与不同算例规模。

> 如需对接验收或外部汇报，可直接引用本说明，或在此基础上补充算例截图与指标表即可。
